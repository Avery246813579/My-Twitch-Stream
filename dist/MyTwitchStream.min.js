var WARNING="",ERROR="VERBOSE",INFO="INFO",VERSION="1.0.0",VERBOSE=!1;function log(a,b){(a!=INFO||VERBOSE)&&console.log("MyTwitchStream v"+VERSION+" "+a+" >> "+b)}function info(a){log(INFO,a)}function warning(a){log(WARNING,a)}function error(a){log(ERROR,a)}function streamOnline(a,b){getStream(a,function(a){"undefined"==typeof a?b(!1):b(!0)})}
function getStream(a,b){$.ajax({type:"GET",url:"https://api.twitch.tv/kraken/streams/"+a,headers:{"Client-ID":"gxf6yv4dro02sb5m0tc9jmb3wak4vk"},success:function(a){null==a.stream?b(void 0):b(a)}})}function saveStreams(){localStorage.STREAMS=JSON.stringify(STREAMS)}function hasStream(a){for(var b=0;b<STREAMS.length;b++)if(STREAMS[b].NAME.toLowerCase()==a.toLowerCase())return!0;return!1}function addStream(a,b){a=a.toUpperCase();hasStream(a)||(STREAMS.push(b),saveStreams())}
function removeStream(a){a=a.toUpperCase();if(hasStream(a)){for(var b=0;b<STREAMS.length;b++)STREAMS[b].NAME.toLowerCase()==a.toLowerCase()&&STREAMS.splice(b,1);saveStreams()}}function updateStream(a,b){a=a.toUpperCase();if(hasStream(a)){for(var c=0;c<STREAMS.length;c++)if(STREAMS[c].NAME.toLowerCase()==a.toLowerCase())for(var d in b)b.hasOwnProperty(d)&&(STREAMS[c][d]=b[d]);saveStreams()}}
function findMostFit(a){for(var b,c=-1,d=0,e=0;e<STREAMS.length;e++)(function(){var f=STREAMS[e];streamOnline(f.NAME,function(e){e&&f.PRIORITY>c&&(b=f,c=b.PRIORITY);d++;d==STREAMS.length&&a(b)})})()}var DEFAULT_SETTINGS={INTERVAL:30,AUTO_UPDATE:!0,UPDATE_DELAY:30};function getStoredStreams(){var a=localStorage.STREAMS;if("undefined"==typeof a)return localStorage.STREAMS=JSON.stringify([]),[];try{return JSON.parse(a)}catch(b){return localStorage.STREAMS=JSON.stringify([]),[]}}
function getSettings(){var a=localStorage.SETTINGS;if("undefined"==typeof a)return localStorage.SETTINGS=JSON.stringify(DEFAULT_SETTINGS),DEFAULT_SETTINGS;try{var a=JSON.parse(a),b=!1,c;for(c in DEFAULT_SETTINGS)DEFAULT_SETTINGS.hasOwnProperty(c)&&"undefined"==typeof a[c]&&(a[c]=DEFAULT_SETTINGS[c],b=!0);b&&(localStorage.SETTINGS=JSON.stringify(a));return a}catch(d){return localStorage.SETTINGS=JSON.stringify(DEFAULT_SETTINGS),DEFAULT_SETTINGS}}
function saveSettings(a){localStorage.SETTINGS=JSON.stringify(a)}var STREAMS=getStoredStreams(),ONLINE_STREAM,UPDATE_METHOD;update();function update(){findMostFit(function(a){"undefined"==typeof a&&(ONLINE_STREAM=void 0);ONLINE_STREAM=a;"undefined"!=typeof UPDATE_METHOD&&UPDATE_METHOD()})}function updateMethod(a){UPDATE_METHOD=a}setInterval(update,getSettings().INTERVAL);
